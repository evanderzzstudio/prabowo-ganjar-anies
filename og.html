<!DOCTYPE html>
<html>

<head>
  <title>Rock Paper Scissors</title>
  <meta charset="UTF-8" />
</head>

<body>
  <script>
    const myArray = [
      'Prabowo',
      'Ganjar',
      'Anies'
    ];

    function computerPlay() {
      return myArray[~~(Math.random() * myArray.length)]
    }

    let computerSelection;
    let playerSelection;
    let computerScore;
    let playerScore;

    game();

    function game() {
      computerScore = 0;
      playerScore = 0;
      for (let i = 0; i < 5; i++) {
        onUserInput();
      }
      console.log(declareWinner());

      function declareWinner() {
        if (playerScore === computerScore) {
          alert(playerScore + '-' + computerScore + '\nTie game!');
          return playerScore + '-' + computerScore + '\nTie game!';
        } else if (playerScore > computerScore) {
          alert(playerScore + '-' + computerScore + '\nYou win!!');
          return playerScore + '-' + computerScore + '\nYou win!!';
        } else {
          alert(playerScore + '-' + computerScore + '\nYou lost. Better luck next time!');
          return playerScore + '-' + computerScore + '\nYou lost. Better luck next time!';
        }
      }
    }

    function onUserInput() {
      playerSelection = prompt('Prabowo, Ganjar, or Anies?', '');
      if ((playerSelection.toLowerCase() == 'prabowo')
        || (playerSelection.toLowerCase() == 'ganjar')
        || (playerSelection.toLowerCase() == 'anies')) {
        console.log(playRound(playerSelection, computerSelection));
      } else {
        alert('That\'s not a valid choice.');
        onUserInput();
      }
    }

    function playRound(playerSelection, computerSelection) {
      computerSelection = computerPlay().toLowerCase();
      playerSelection = playerSelection.toLowerCase();
      if (computerSelection == playerSelection) {
        alert('Tie game!');
        return 'Tie game\nComputer Score: ' +
          computerScore + '\nYour Score: ' + playerScore;
      } else if ((computerSelection == 'prabowo' && playerSelection == 'anies')
        || (computerSelection == 'anies' && playerSelection == 'ganjar')
        || (computerSelection == 'ganjar' && playerSelection == 'prabowo')) {
        alert('You lose! ' + computerSelection + ' beats ' + playerSelection);
        return 'Computer Score: ' + ++computerScore +
          '\nYour Score: ' + playerScore;
      } else {
        alert('You win! ' + playerSelection + ' beats ' + computerSelection);
        return 'Your Score: ' + ++playerScore +
          '\nComputer Score: ' + computerScore;
      }
    }
  </script>
</body>

</html>